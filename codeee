#include <bits/stdc++.h>
using namespace std;
int p1=0,p2=0,dra=0;
int winner_check(vector<vector<int>> cc)
{
    int draw=1;
    //vector<vector<vector<int>>> positions={{{0,0},{1,0},{2,0},{3,0}},/*col1*/{{0,1},{1,1},{2,1},{3,1}},/*col2*/{{0,2},{1,2},{2,2},{3,2}},/*col3*/{{0,3},{1,3},{2,3},{3,3}}/*col4*/};
    vector<vector<int>> cols0,cols1;
    for(int i=0;i<4;i+=1)
    {
        vector<int> col;
        vector<int> bb;
        for(int j=0;j<4;j+=1)
        {
            if(cc[i][j]==0)
            {
                col.push_back(j);
            }
            else if(cc[i][j]==1)
            {
                bb.push_back(j);
            }
            else
            {
                draw = 0;
            }

        }
        cols0.push_back(col);
        cols1.push_back(bb);
    }
    bool diag0=1,diag1=1;
    for(int g=0;g<4;g+=1)
    {
        int c0=cols0[g].size();
        //cout << c0<<"wtfff"<<endl;
        int c1=cols1[g].size();
        int fff=(g+1)%4;
        // row logic
        if(c0==4)
        {
            return 0;
        }
        if(c1==4)
        {
            return 1;
        }
        //column logic
        int ii=0;
        for(ii=0;ii<4;ii+=1)
        {
            if(cc[ii][g]!=0)
            {
                break;
            }
        }
        if(ii==4)
        {
            return 0;
        }
        int iii=0;
        for(iii=0;iii<4;iii+=1)
        {
            if(cc[iii][g]!=0)
            {
                break;
            }
        }
        if(iii==4)
        {
            return 1;
        }
        // k-map logic
        if(c0==2)
        {
            if(cols0[g]==cols0[fff] && ((cols0[g][0]+1)==cols0[g][1]))
            {
                return 0;
            }
        }
        if(c1==2 && cols1[g]==cols1[fff] && ((cols1[g][0]+1)==cols1[g][1]) )
        {
            return 1;
        }


    }
    //diag logic
    int ii=0;
        for(ii=0;ii<4;ii+=1)
        {
            if(cc[ii][ii]!=0)
            {
                break;
            }
        }
        if(ii==4)
        {
            return 0;
        }
        for(ii=0;ii<4;ii+=1)
        {
            if(cc[ii][4-ii-1]!=0)
            {
                break;
            }
        }
        if(ii==4)
        {
            return 0;
        }
        for(ii=0;ii<4;ii+=1)
        {
            if(cc[ii][ii]!=1)
            {
                break;
            }
        }
        if(ii==4)
        {
            return 1;
        }
        for(ii=0;ii<4;ii+=1)
        {
            if(cc[ii][4-ii-1]!=1)
            {
                break;
            }
        }
        if(ii==4)
        {
            return 1;
        }

    if(draw==1)
    {
        return 3;
    }
    return 2;


}
void game_play(vector<vector<int>> cc,int turn)
{
    int w = winner_check(cc);
    if(w==1)
    {
        p1++;
        cout << "p1 won" << endl;
        for(int i=0;i<4;i+=1)
    {
        for(int j=0;j<4;j+=1)
        {
            cout << cc[i][j] << " ";
        }
        cout << endl;
    }
        cout << p1 << " " << p2 << " " << dra << endl;
        return;
    }
    if(w==0)
    {
        p2++;
        cout << "p2 won" << endl;
        for(int i=0;i<4;i+=1)
    {
        for(int j=0;j<4;j+=1)
        {
            cout << cc[i][j] << " ";
        }
        cout << endl;
    }
        cout << p1 << " " << p2 << " " << dra << endl;
        return;
    }
    if(w==3)
    {
        dra++;
        cout << "draw " << endl;
        for(int i=0;i<4;i+=1)
    {
        for(int j=0;j<4;j+=1)
        {
            cout << cc[i][j] << " ";
        }
        cout << endl;
    }
        cout << p1 << " " << p2 << " " << dra << endl;
        return;
    }
    for(int i=0;i<4;i+=1)
    {
        for(int j=0;j<4;j+=1)
        {
            if(cc[i][j]==-1)
            {
                cc[i][j]=turn;
                if(turn==0)
                {
                    game_play(cc,1);
                }
                else
                {
                     game_play(cc,0);
                }
                cc[i][j]=-1;

            }
        }
    }
    return;
}
int main()
{
    vector<vector<int>> cc(4);
    for(int i=0;i<4;i+=1)
    {
        for(int j=0;j<4;j+=1)
        {
            cc[i].push_back(-1);
        }
    }
    game_play(cc,1);
    cout << "player 1 wins: "<< p1 << endl;
    cout << "player 2 wins: "<< p2 << endl;
    cout << "draws : "<< dra << endl;
}
