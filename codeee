#include <SFML\Graphics.hpp>
#include <SFML/Audio.hpp>
#include <iostream>
#include <vector>
#include <stack>
using namespace std;
int converttx(int xxx)
{
    int aaaa = -5;
    if (xxx >= 100 && xxx <= 250)
    {
        aaaa = 0;
    }
    if (xxx >= 254 && xxx <= 403)
    {
        aaaa = 1;
    }
    if (xxx >= 407 && xxx <= 556)
    {
        aaaa = 2;
    }
    if (xxx >= 560 && xxx <= 709)
    {
        aaaa = 3;
    }
    return aaaa;
}
int convertty(int xxx)
{
    int aaaa = -5;
    if (xxx >= 0 && xxx <= 150)
    {
        aaaa = 0;
    }
    if (xxx >= 154 && xxx <= 303)
    {
        aaaa = 1;
    }
    if (xxx >= 307 && xxx <= 456)
    {
        aaaa = 2;
    }
    if (xxx >= 460 && xxx <= 609)
    {
        aaaa = 3;
    }
    return aaaa;
}
bool checkvalidd(vector<vector<int>> cc, int xxx, int yyy)
{
    if (xxx == -5 || yyy == -5)
    {
        return false;
    }
    if (cc[yyy][xxx] == -1)
    {
        return true;
    }
    return false;
}
int winner_check(vector<vector<int>> cc)
{
    int draw = 1;
    //vector<vector<vector<int>>> positions={{{0,0},{1,0},{2,0},{3,0}},/*col1*/{{0,1},{1,1},{2,1},{3,1}},/*col2*/{{0,2},{1,2},{2,2},{3,2}},/*col3*/{{0,3},{1,3},{2,3},{3,3}}/*col4*/};
    vector<vector<int>> cols0, cols1;
    for (int i = 0; i < 4; i += 1)
    {
        vector<int> col;
        vector<int> bb;
        for (int j = 0; j < 4; j += 1)
        {
            if (cc[i][j] == 0)
            {
                col.push_back(j);
            }
            else if (cc[i][j] == 1)
            {
                bb.push_back(j);
            }
            else
            {
                draw = 0;
            }

        }
        cols0.push_back(col);
        cols1.push_back(bb);
    }
    bool diag0 = 1, diag1 = 1;
    for (int g = 0; g < 4; g += 1)
    {
        int c0 = cols0[g].size();
        //cout << c0<<"wtfff"<<endl;
        int c1 = cols1[g].size();
        int fff = (g + 1) % 4;
        int c00 = cols0[fff].size();
        int c11 = cols1[fff].size();
        // row logic
        if (c0 == 4)
        {
            return 0;
        }
        if (c1 == 4)
        {
            return 1;
        }
        //column logic
        int ii = 0;
        for (ii = 0; ii < 4; ii += 1)
        {
            if (cc[ii][g] != 0)
            {
                break;
            }
        }
        if (ii == 4)
        {
            return 0;
        }
        int iii = 0;
        for (iii = 0; iii < 4; iii += 1)
        {
            if (cc[iii][g] != 1)
            {
                break;
            }
        }
        if (iii == 4)
        {
            return 1;
        }
        // k-map logic
        if (c0 >= 2 && c00 >= 2)
        {
            int j = 0;
            for (int d = 0; d < (c0) && j < (c00);)
            {
                if (cols0[g][d] == cols0[fff][j])
                {
                    int r34 = (d + 1) % c0;
                    int r43 = (j + 1) % c00;
                    if ((cols0[g][r34] == cols0[fff][r43]) && (((cols0[g][d] + 1) % 4) == cols0[g][r34]))
                    {
                        return 0;
                    }
                    else
                    {
                        d++;
                    }
                }
                else if ((cols0[g][d] > cols0[fff][j]))
                {
                    j++;
                }
                else if (cols0[g][d] < cols0[fff][j])
                {
                    d++;
                }
            }

        }
        if (c1 >= 2 && c11 >= 2)
        {
            int j = 0;
            for (int d = 0; d < (c1) && j < (c11);)
            {
                if (cols1[g][d] == cols1[fff][j])
                {
                    int r34 = (d + 1) % c1;
                    int r43 = (j + 1) % c11;
                    if ((cols1[g][r34] == cols1[fff][r43]) && (((cols1[g][d] + 1) % 4) == cols1[g][r34]))
                    {
                        return 1;
                    }
                    else
                    {
                        d++;
                    }
                }
                else if ((cols1[g][d] > cols1[fff][j]))
                {
                    j++;
                }
                else if (cols1[g][d] < cols1[fff][j])
                {
                    d++;
                }
            }

        }



    }
    //diag logic
    int ii = 0;
    for (ii = 0; ii < 4; ii += 1)
    {
        if (cc[ii][ii] != 0)
        {
            break;
        }
    }
    if (ii == 4)
    {
        return 0;
    }
    for (ii = 0; ii < 4; ii += 1)
    {
        if (cc[ii][4 - ii - 1] != 0)
        {
            break;
        }
    }
    if (ii == 4)
    {
        return 0;
    }
    for (ii = 0; ii < 4; ii += 1)
    {
        if (cc[ii][ii] != 1)
        {
            break;
        }
    }
    if (ii == 4)
    {
        return 1;
    }
    for (ii = 0; ii < 4; ii += 1)
    {
        if (cc[ii][4 - ii - 1] != 1)
        {
            break;
        }
    }
    if (ii == 4)
    {
        return 1;
    }

    if (draw == 1)
    {
        return 3;
    }
    return 2;


}

int main() {
	sf::RenderWindow window(sf::VideoMode(800, 709), "K-Map Game");
	//609
	//window.setVerticalSyncEnabled(true);
	window.setFramerateLimit(60);

	std::cout << "Game started" << std::endl;
	//variables
	vector<vector<int>> cc(4);
	for (int i = 0; i < 4; i += 1)
	{
		for (int j = 0; j < 4; j += 1)
		{
			cc[i].push_back(-1);
		}
	}
	int count = 1;
    stack <pair<int,int>> movelog;
    stack <pair<int,int>> movelog2;
    bool x111 = false, x222 = false, x33 = false, x44 = false, x55 = false, x66 = false, x77 = false, x88 = false, x99 = false, x1010 = false, x1111 = false, x1212 = false, x1313 = false, x1414 = false, x1515 = false, x1616 = false;
    bool o111 = false, o222 = false, o33 = false, o44 = false, o55 = false, o66 = false, o77 = false, o88 = false, o99 = false, o1010 = false, o1111 = false, o1212 = false, o1313 = false, o1414 = false, o1515 = false, o1616 = false;
    bool invalmove = false, yexwon = false, wowon = false, dhraa = false, yexu = false, wo = false;
    //load images
	sf::Texture box_texture;
	if (box_texture.loadFromFile("Data/x move.png") == false)
	{
		std::cout << "loading x failed" << std::endl;
	}
	box_texture.setSmooth(true);
	sf::Texture box2;
	if (box2.loadFromFile("Data/o move1.png") == false)
	{
		std::cout << "loading o move failed" << std::endl;
	}
    sf::Texture leftrightt;
    if (leftrightt.loadFromFile("Data/leftright-removebg-preview.png") == false)
    {
        std::cout << "left right faillllll" << std::endl;
    }
    else
    {
        std::cout << " yessjdgfkaefls" << std::endl;
    }
    leftrightt.setSmooth(true);
	box2.setSmooth(true);
	//font file
	sf::Font font;
	if (font.loadFromFile("Data/Sisperdotze-Regular.otf") == false)
	{
		std::cout << "loading font failed" << std::endl;
	}
	sf::Text xtext;
	sf::Text otext;
	sf::Text gameover1;
	sf::Text gameover0;
    sf::Text dhr;
	sf::Text invalidmove;
	xtext.setFont(font);
	otext.setFont(font);
	gameover1.setFont(font);
	gameover0.setFont(font);
    dhr.setFont(font);
	invalidmove.setFont(font);
	xtext.setString("X should play");
	otext.setString("O should play");
	gameover1.setString("GAME OVER   X WON");
	gameover0.setString("GAME OVER   O WON");
    dhr.setString("draw");
	invalidmove.setString("INVALID MOVE ");
	invalidmove.setFillColor(sf::Color(255, 1, 1));
	invalidmove.setCharacterSize(20);
	invalidmove.setPosition(200, 630);
	xtext.setFillColor(sf::Color(2, 1, 1));
	xtext.setCharacterSize(20);
	xtext.setPosition(200, 630);
	otext.setFillColor(sf::Color(2, 1, 1));
	otext.setCharacterSize(20);
	otext.setPosition(200, 630);
	gameover1.setFillColor(sf::Color(1, 55, 32));
	gameover1.setCharacterSize(20);
	gameover1.setStyle(sf::Text::Bold);
	gameover1.setPosition(200, 630);
	gameover0.setFillColor(sf::Color(2, 1, 255));
	gameover0.setCharacterSize(20);
	gameover0.setStyle(sf::Text::Bold);
	gameover0.setPosition(200, 630);
    dhr.setFillColor(sf::Color(128, 0, 128));
    dhr.setCharacterSize(20);
    dhr.setStyle(sf::Text::Bold);
    dhr.setPosition(200, 630);
	//sounds
	sf::SoundBuffer key_press;
	if (key_press.loadFromFile("Data/bubble.wav")==false)
	{
		std::cout << "sound failed" << std::endl;
	}

	sf::Sound keypress;
	keypress.setBuffer(key_press);

	sf::SoundBuffer gamesound;
	if (gamesound.loadFromFile("Data/desert.wav") == false)
	{
		std::cout << "game sound failed" << std::endl;
	}

	sf::Sound game;
	game.setBuffer(gamesound);
	game.play();
	game.setPitch(1.2f);
	game.setLoop(true);
	/*sf::Music game1;
	if (game1.openFromFile("Data/myusic.wav") == false)
	{

	}
	game1.play();
	*/
	sf::RectangleShape x(sf::Vector2f(100, 100));
	sf::RectangleShape o(sf::Vector2f(100, 100));
	x.setTexture(&box_texture);
	o.setTexture(&box2);
	x.setPosition(130, 130);
	o.setPosition(400, 400);

    sf::RectangleShape x1(sf::Vector2f(100, 100));
    sf::RectangleShape o1(sf::Vector2f(100, 100));
    x1.setTexture(&box_texture);
    o1.setTexture(&box2);
    x1.setOrigin(50, 50);
    o1.setOrigin(50, 50);
    x1.setPosition(175, 75);
    o1.setPosition(175, 75);

    sf::RectangleShape x2(sf::Vector2f(100, 100));
    sf::RectangleShape o2(sf::Vector2f(100, 100));
    sf::RectangleShape lef(sf::Vector2f(50, 50));
    sf::RectangleShape rai(sf::Vector2f(50, 50));
    lef.setPosition(0, 545);
    rai.setPosition(50, 545);
    lef.setFillColor(sf::Color(0, 200, 180));
    rai.setFillColor(sf::Color(0, 200, 180));
    bool leff = true;
    bool raii = true;
    x2.setTexture(&box_texture);
    o2.setTexture(&box2);
    x2.setOrigin(50, 50);
    o2.setOrigin(50, 50);
    x2.setPosition(328.5, 75);
    o2.setPosition(328.5, 75);


    sf::RectangleShape x3(sf::Vector2f(100, 100));
    sf::RectangleShape o3(sf::Vector2f(100, 100));
    x3.setTexture(&box_texture);
    o3.setTexture(&box2);
    x3.setOrigin(50, 50);
    o3.setOrigin(50, 50);
    x3.setPosition(481.5, 75);
    o3.setPosition(481.5, 75);

    sf::RectangleShape x4(sf::Vector2f(100, 100));
    sf::RectangleShape o4(sf::Vector2f(100, 100));
    x4.setTexture(&box_texture);
    o4.setTexture(&box2);
    x4.setOrigin(50, 50);
    o4.setOrigin(50, 50);
    x4.setPosition(634.5, 75);
    o4.setPosition(634.5, 75);

    sf::RectangleShape x5(sf::Vector2f(100, 100));
    sf::RectangleShape o5(sf::Vector2f(100, 100));
    x5.setTexture(&box_texture);
    o5.setTexture(&box2);
    x5.setOrigin(50, 50);
    o5.setOrigin(50, 50);
    x5.setPosition(175, 228.5);
    o5.setPosition(175, 228.5);

    sf::RectangleShape x6(sf::Vector2f(100, 100));
    sf::RectangleShape o6(sf::Vector2f(100, 100));
    x6.setTexture(&box_texture);
    o6.setTexture(&box2);
    x6.setOrigin(50, 50);
    o6.setOrigin(50, 50);
    x6.setPosition(328.5, 228.5);
    o6.setPosition(328.5, 228.5);

    sf::RectangleShape x7(sf::Vector2f(100, 100));
    sf::RectangleShape o7(sf::Vector2f(100, 100));
    x7.setTexture(&box_texture);
    o7.setTexture(&box2);
    x7.setOrigin(50, 50);
    o7.setOrigin(50, 50);
    x7.setPosition(481.5, 228.5);
    o7.setPosition(481.5, 228.5);

    sf::RectangleShape x8(sf::Vector2f(100, 100));
    sf::RectangleShape o8(sf::Vector2f(100, 100));
    x8.setTexture(&box_texture);
    o8.setTexture(&box2);
    x8.setOrigin(50, 50);
    o8.setOrigin(50, 50);
    x8.setPosition(634.5, 228.5);
    o8.setPosition(634.5, 228.5);

    sf::RectangleShape x9(sf::Vector2f(100, 100));
    sf::RectangleShape o9(sf::Vector2f(100, 100));
    x9.setTexture(&box_texture);
    o9.setTexture(&box2);
    x9.setOrigin(50, 50);
    o9.setOrigin(50, 50);
    x9.setPosition(175, 381.5);
    o9.setPosition(175, 381.5);

    sf::RectangleShape x10(sf::Vector2f(100, 100));
    sf::RectangleShape o10(sf::Vector2f(100, 100));
    x10.setTexture(&box_texture);
    o10.setTexture(&box2);
    x10.setOrigin(49, 49);
    o10.setOrigin(49,49);
    x10.setPosition(328.5, 381.5);
    o10.setPosition(328.5, 381.5);

    sf::RectangleShape x11(sf::Vector2f(100, 100));
    sf::RectangleShape o11(sf::Vector2f(100, 100));
    x11.setTexture(&box_texture);
    o11.setTexture(&box2);
    x11.setOrigin(50, 50);
    o11.setOrigin(50, 50);
    x11.setPosition(481.5, 381.5);
    o11.setPosition(481.5, 381.5);

    sf::RectangleShape x12(sf::Vector2f(100, 100));
    sf::RectangleShape o12(sf::Vector2f(100, 100));
    x12.setTexture(&box_texture);
    o12.setTexture(&box2);
    x12.setOrigin(50, 50);
    o12.setOrigin(50, 50);
    x12.setPosition(634.5, 381.5);
    o12.setPosition(634.5, 381.5);

    sf::RectangleShape x13(sf::Vector2f(100, 100));
    sf::RectangleShape o13(sf::Vector2f(100, 100));
    x13.setTexture(&box_texture);
    o13.setTexture(&box2);
    x13.setOrigin(50, 50);
    o13.setOrigin(50, 50);
    x13.setPosition(175, 534.5);
    o13.setPosition(175, 534.5);

    sf::RectangleShape x14(sf::Vector2f(100, 100));
    sf::RectangleShape o14(sf::Vector2f(100, 100));
    x14.setTexture(&box_texture);
    o14.setTexture(&box2);
    x14.setOrigin(50, 50);
    o14.setOrigin(50, 50);
    x14.setPosition(328.5, 534.5);
    o14.setPosition(328.5, 534.5);

    sf::RectangleShape x15(sf::Vector2f(100, 100));
    sf::RectangleShape o15(sf::Vector2f(100, 100));
    x15.setTexture(&box_texture);
    o15.setTexture(&box2);
    x15.setOrigin(50, 50);
    o15.setOrigin(50, 50);
    x15.setPosition(481.5, 534.5);
    o15.setPosition(481.5, 534.5);


    sf::RectangleShape x16(sf::Vector2f(100, 100));
    sf::RectangleShape o16(sf::Vector2f(100, 100));
    x16.setTexture(&box_texture);
    o16.setTexture(&box2);
    x16.setOrigin(50, 50);
    o16.setOrigin(50, 50);
    x16.setPosition(634.5, 534.5);
    o16.setPosition(634.5, 534.5);

	sf::RectangleShape rectangle(sf::Vector2f(609, 609));
	rectangle.setPosition(100, 0);
	sf::RectangleShape rectangle1(sf::Vector2f(3, 609));
	sf::RectangleShape rectangle2(sf::Vector2f(3, 609));
	sf::RectangleShape rectangle3(sf::Vector2f(3, 609));
	sf::RectangleShape rectangle4(sf::Vector2f(609, 3));
	sf::RectangleShape rectangle5(sf::Vector2f(609, 3));
	sf::RectangleShape rectangle6(sf::Vector2f(609, 3));
	sf::RectangleShape rec(sf::Vector2f(609, 100));
	rec.setPosition(100, 609);
	rectangle1.setPosition(251, 0);
	rectangle2.setPosition(404, 0);
	rectangle3.setPosition(557, 0);
	rectangle4.setPosition(100, 151);
	rectangle5.setPosition(100, 304);
	rectangle6.setPosition(100, 457);
	//rectangle1.setOrigin(251, 301.5);
	rectangle1.setFillColor(sf::Color(2, 1, 1));
	rectangle2.setFillColor(sf::Color(2, 1, 1));
	rectangle3.setFillColor(sf::Color(2, 1, 1));
	rectangle4.setFillColor(sf::Color(2, 1, 1));
	rectangle5.setFillColor(sf::Color(2, 1, 1));
	rectangle6.setFillColor(sf::Color(2, 1, 1));
	rec.setFillColor(sf::Color(255, 255, 1));

    sf::Sprite backfrontt;
    backfrontt.setTexture(leftrightt);
    backfrontt.setPosition(-11, 510);
    backfrontt.setScale(0.35f, 0.35f);
	bool left_click = false;
	while (window.isOpen())
	{
		sf::Event event;
		while (window.pollEvent(event))
		{
			if (event.type == sf::Event::Closed)
			{
				window.close();
			}
			if (event.type == sf::Event::MouseButtonPressed)
			{
				if (event.mouseButton.button == sf::Mouse::Left)
				{
					std::cout << "Left click pressed"<< std::endl;
					std::cout << event.mouseButton.x << std::endl;
					std::cout << event.mouseButton.y << std:: endl;
				}
			}
			if (event.type == sf::Event::MouseButtonReleased)
			{
                if (event.mouseButton.button == sf::Mouse::Left)
                {
                    keypress.play();
                    int xxx = event.mouseButton.x;
                    int yyy = event.mouseButton.y;
                    if (xxx >= 2 && xxx <= 98 && yyy >= 545 && yyy <= 592)
                    {
                        if (xxx <= 49 && (!movelog.empty()) && leff==false)
                        {
                            if (yexwon == true)
                            {
                                yexwon = false;
                                yexu = true;
                            }
                            else if (wowon == true)
                            {
                                wowon = false;
                                wo = true;
                            }
                            else if (dhraa == true)
                            {
                                dhraa = false;
                                wo = true;
                            }
                            else
                            {
                                yexu = !(yexu);
                                wo = !(wo);
                            }
                            
                            raii = false;

                            invalmove = false;
                            pair<int, int> topele = movelog.top();
                            int xxxx = topele.second;
                            int yyyy = topele.first;

                            count--;
                            cc[yyyy][xxxx] = -1;
                            if (xxxx == 0 && yyyy == 0)
                            {
                                if (count % 2 == 1)
                                {
                                    x111 = false;
                                }
                                else
                                {
                                    o111 = false;
                                }
                            }
                            if (xxxx == 1 && yyyy == 0)
                            {
                                if (count % 2 == 1)
                                {
                                    x222 = false;
                                }
                                else
                                {
                                    o222 = false;
                                }
                            }
                            if (xxxx == 2 && yyyy == 0)
                            {
                                if (count % 2 == 1)
                                {
                                    x33 = false;
                                }
                                else
                                {
                                    o33 = false;
                                }
                            }
                            if (xxxx == 3 && yyyy == 0)
                            {
                                if (count % 2 == 1)
                                {
                                    x44 = false;
                                }
                                else
                                {
                                    o44 = false;
                                }
                            }
                            if (xxxx == 0 && yyyy == 1)
                            {
                                if (count % 2 == 1)
                                {
                                    x55 = false;
                                }
                                else
                                {
                                    o55 = false;
                                }
                            }
                            if (xxxx == 1 && yyyy == 1)
                            {
                                if (count % 2 == 1)
                                {
                                    x66 = false;
                                }
                                else
                                {
                                    o66 = false;
                                }
                            }
                            if (xxxx == 2 && yyyy == 1)
                            {
                                if (count % 2 == 1)
                                {
                                    x77 = false;
                                }
                                else
                                {
                                    o77 = false;
                                }
                            }
                            if (xxxx == 3 && yyyy == 1)
                            {
                                if (count % 2 == 1)
                                {
                                    x88 = false;
                                }
                                else
                                {
                                    o88 = false;
                                }
                            }
                            if (xxxx == 0 && yyyy == 2)
                            {
                                if (count % 2 == 1)
                                {
                                    x99 = false;
                                }
                                else
                                {
                                    o99 = false;
                                }
                            }
                            if (xxxx == 1 && yyyy == 2)
                            {
                                if (count % 2 == 1)
                                {
                                    x1010 = false;
                                }
                                else
                                {
                                    o1010 = false;
                                }
                            }
                            if (xxxx == 2 && yyyy == 2)
                            {
                                if (count % 2 == 1)
                                {
                                    x1111 = false;
                                }
                                else
                                {
                                    o1111 = false;
                                }
                            }
                            if (xxxx == 3 && yyyy == 2)
                            {
                                if (count % 2 == 1)
                                {
                                    x1212 = false;
                                }
                                else
                                {
                                    o1212 = false;
                                }
                            }
                            if (xxxx == 0 && yyyy == 3)
                            {
                                if (count % 2 == 1)
                                {
                                    x1313 = false;
                                }
                                else
                                {
                                    o1313 = false;
                                }
                            }
                            if (xxxx == 1 && yyyy == 3)
                            {
                                if (count % 2 == 1)
                                {
                                    x1414 = false;
                                }
                                else
                                {
                                    o1414 = false;
                                }
                            }
                            if (xxxx == 2 && yyyy == 3)
                            {
                                if (count % 2 == 1)
                                {
                                    x1515 = false;
                                }
                                else
                                {
                                    o1515 = false;
                                }
                            }
                            if (xxxx == 3 && yyyy == 3)
                            {
                                if (count % 2 == 1)
                                {
                                    x1616 = false;
                                }
                                else
                                {
                                    o1616 = false;
                                }
                            }
                            movelog2.push(topele);
                            movelog.pop();
                            if (movelog.empty())
                            {
                                leff = true;
                            }
                        }
                        if (xxx > 49 && (!movelog2.empty()) && raii==false)
                        {
                            yexu = !(yexu);
                            wo = !(wo);
                            invalmove = false;
                            leff = false;
                            pair<int, int> topele = movelog2.top();
                            int xxxx = topele.second;
                            int yyyy = topele.first;

                            cc[yyyy][xxxx] = count % 2;
                            if (xxxx == 0 && yyyy == 0)
                            {
                                if (count % 2 == 1)
                                {
                                    x111 = true;
                                }
                                else
                                {
                                    o111 = true;
                                }
                            }
                            if (xxxx == 1 && yyyy == 0)
                            {
                                if (count % 2 == 1)
                                {
                                    x222 = true;
                                }
                                else
                                {
                                    o222 = true;
                                }
                            }
                            if (xxxx == 2 && yyyy == 0)
                            {
                                if (count % 2 == 1)
                                {
                                    x33 = true;
                                }
                                else
                                {
                                    o33 = true;
                                }
                            }
                            if (xxxx == 3 && yyyy == 0)
                            {
                                if (count % 2 == 1)
                                {
                                    x44 = true;
                                }
                                else
                                {
                                    o44 = true;
                                }
                            }
                            if (xxxx == 0 && yyyy == 1)
                            {
                                if (count % 2 == 1)
                                {
                                    x55 = true;
                                }
                                else
                                {
                                    o55 = true;
                                }
                            }
                            if (xxxx == 1 && yyyy == 1)
                            {
                                if (count % 2 == 1)
                                {
                                    x66 = true;
                                }
                                else
                                {
                                    o66 = true;
                                }
                            }
                            if (xxxx == 2 && yyyy == 1)
                            {
                                if (count % 2 == 1)
                                {
                                    x77 = true;
                                }
                                else
                                {
                                    o77 = true;
                                }
                            }
                            if (xxxx == 3 && yyyy == 1)
                            {
                                if (count % 2 == 1)
                                {
                                    x88 = true;
                                }
                                else
                                {
                                    o88 = true;
                                }
                            }
                            if (xxxx == 0 && yyyy == 2)
                            {
                                if (count % 2 == 1)
                                {
                                    x99 = true;
                                }
                                else
                                {
                                    o99 = true;
                                }
                            }
                            if (xxxx == 1 && yyyy == 2)
                            {
                                if (count % 2 == 1)
                                {
                                    x1010 = true;
                                }
                                else
                                {
                                    o1010 = true;
                                }
                            }
                            if (xxxx == 2 && yyyy == 2)
                            {
                                if (count % 2 == 1)
                                {
                                    x1111 = true;
                                }
                                else
                                {
                                    o1111 = true;
                                }
                            }
                            if (xxxx == 3 && yyyy == 2)
                            {
                                if (count % 2 == 1)
                                {
                                    x1212 = true;
                                }
                                else
                                {
                                    o1212 = true;
                                }
                            }
                            if (xxxx == 0 && yyyy == 3)
                            {
                                if (count % 2 == 1)
                                {
                                    x1313 = true;
                                }
                                else
                                {
                                    o1313 = true;
                                }
                            }
                            if (xxxx == 1 && yyyy == 3)
                            {
                                if (count % 2 == 1)
                                {
                                    x1414 = true;
                                }
                                else
                                {
                                    o1414 = true;
                                }
                            }
                            if (xxxx == 2 && yyyy == 3)
                            {
                                if (count % 2 == 1)
                                {
                                    x1515 = true;
                                }
                                else
                                {
                                    o1515 = true;
                                }
                            }
                            if (xxxx == 3 && yyyy == 3)
                            {
                                if (count % 2 == 1)
                                {
                                    x1616 = true;
                                }
                                else
                                {
                                    o1616 = true;
                                }
                            }
                            count++;
                            movelog.push(topele);
                            movelog2.pop();
                            if (movelog2.empty())
                            {
                                raii = true;
                            }
                        }
                        int anss = winner_check(cc);
                        if (anss == 1)
                        {
                            yexwon = true;
                            yexu = false;
                            wo = false;
                        }
                        if (anss == 0)
                        {
                            wowon = true;
                            yexu = false;
                            wo = false;
                        }
                        if (anss == 3)
                        {
                            dhraa = true;
                            yexu = false;
                            wo = false;
                        }
                  
                    }
                    else
                    {

                    xxx = converttx(xxx);
                    yyy = convertty(yyy);

                    bool validmove = checkvalidd(cc, xxx, yyy);
                    if (validmove == false || yexwon == true || wowon == true)
                    {
                        invalmove = true;
                        invalidmove.setPosition(200, 630);
                    }
                    else
                    {
                        while (!movelog2.empty())
                        {
                            movelog2.pop();
                        }
                        raii = true;
                        leff = false;
                        pair<int, int> ssw;
                        ssw.first = yyy;
                        ssw.second = xxx;
                        movelog.push(ssw);
                        invalmove = false;
                        cc[yyy][xxx] = count % 2;
                        if (count % 2 == 0)
                        {
                            yexu = true;
                            wo = false;
                        }
                        else
                        {
                            wo = true;
                            yexu = false;
                        }

                        if (xxx == 0 && yyy == 0)
                        {
                            if (count % 2 == 1)
                            {
                                x111 = true;
                            }
                            else
                            {
                                o111 = true;
                            }
                        }
                        if (xxx == 1 && yyy == 0)
                        {
                            if (count % 2 == 1)
                            {
                                x222 = true;
                            }
                            else
                            {
                                o222 = true;
                            }
                        }
                        if (xxx == 2 && yyy == 0)
                        {
                            if (count % 2 == 1)
                            {
                                x33 = true;
                            }
                            else
                            {
                                o33 = true;
                            }
                        }
                        if (xxx == 3 && yyy == 0)
                        {
                            if (count % 2 == 1)
                            {
                                x44 = true;
                            }
                            else
                            {
                                o44 = true;
                            }
                        }
                        if (xxx == 0 && yyy == 1)
                        {
                            if (count % 2 == 1)
                            {
                                x55 = true;
                            }
                            else
                            {
                                o55 = true;
                            }
                        }
                        if (xxx == 1 && yyy == 1)
                        {
                            if (count % 2 == 1)
                            {
                                x66 = true;
                            }
                            else
                            {
                                o66 = true;
                            }
                        }
                        if (xxx == 2 && yyy == 1)
                        {
                            if (count % 2 == 1)
                            {
                                x77 = true;
                            }
                            else
                            {
                                o77 = true;
                            }
                        }
                        if (xxx == 3 && yyy == 1)
                        {
                            if (count % 2 == 1)
                            {
                                x88 = true;
                            }
                            else
                            {
                                o88 = true;
                            }
                        }
                        if (xxx == 0 && yyy == 2)
                        {
                            if (count % 2 == 1)
                            {
                                x99 = true;
                            }
                            else
                            {
                                o99 = true;
                            }
                        }
                        if (xxx == 1 && yyy == 2)
                        {
                            if (count % 2 == 1)
                            {
                                x1010 = true;
                            }
                            else
                            {
                                o1010 = true;
                            }
                        }
                        if (xxx == 2 && yyy == 2)
                        {
                            if (count % 2 == 1)
                            {
                                x1111 = true;
                            }
                            else
                            {
                                o1111 = true;
                            }
                        }
                        if (xxx == 3 && yyy == 2)
                        {
                            if (count % 2 == 1)
                            {
                                x1212 = true;
                            }
                            else
                            {
                                o1212 = true;
                            }
                        }
                        if (xxx == 0 && yyy == 3)
                        {
                            if (count % 2 == 1)
                            {
                                x1313 = true;
                            }
                            else
                            {
                                o1313 = true;
                            }
                        }
                        if (xxx == 1 && yyy == 3)
                        {
                            if (count % 2 == 1)
                            {
                                x1414 = true;
                            }
                            else
                            {
                                o1414 = true;
                            }
                        }
                        if (xxx == 2 && yyy == 3)
                        {
                            if (count % 2 == 1)
                            {
                                x1515 = true;
                            }
                            else
                            {
                                o1515 = true;
                            }
                        }
                        if (xxx == 3 && yyy == 3)
                        {
                            if (count % 2 == 1)
                            {
                                x1616 = true;
                            }
                            else
                            {
                                o1616 = true;
                            }
                        }
                        count++;
                        int anss = winner_check(cc);
                        if (anss == 1)
                        {
                            yexwon = true;
                            yexu = false;
                            wo = false;
                        }
                        if (anss == 0)
                        {
                            wowon = true;
                            yexu = false;
                            wo = false;
                        }
                        if (anss == 3)
                        {
                            dhraa = true;
                            yexu = false;
                            wo = false;
                        }
                    }
                }
                    for (int i = 0; i < 4; i += 1)
                    {
                        for (int j = 0; j < 4; j += 1)
                        {
                            cout << cc[i][j] << " ";
                        }
                        cout << endl;
                    }
				}
			}
		}
		//logic handling
		//std::cout << sf::Mouse::getPosition().x << std::endl;


		window.clear(sf::Color(0,200,180));

		window.draw(rectangle);
		window.draw(rectangle1);
		window.draw(rectangle2);
		window.draw(rectangle3);
		window.draw(rectangle4);
		window.draw(rectangle5);
		window.draw(rectangle6);
		window.draw(rec);
		//window.draw(x);
		//window.draw(o);
        if (x111 == true)
        {
            window.draw(x1);
        }
        if (x222 == true)
        {
            window.draw(x2);
        }
        if (x33 == true)
        {
            window.draw(x3);
        }
        if (x44 == true)
        {
            window.draw(x4);
        }
        if (x55 == true)
        {
            window.draw(x5);
        }
        if (x66 == true)
        {
            window.draw(x6);
        }
        if (x77 == true)
        {
            window.draw(x7);
        }
        if (x88 == true)
        {
            window.draw(x8);
        }
        if (x99 == true)
        {
            window.draw(x9);
        }
        if (x1010 == true)
        {
            window.draw(x10);
        }
        if (x1111 == true)
        {
            window.draw(x11);
        }
        if (x1212 == true)
        {
            window.draw(x12);
        }
        if (x1313 == true)
        {
            window.draw(x13);
        }
        if (x1414 == true)
        {
            window.draw(x14);
        }
        if (x1515 == true)
        {
            window.draw(x15);
        }
        if (x1616 == true)
        {
            window.draw(x16);
        }
        if (o111 == true)
        {
            window.draw(o1);
        }
        if (o222 == true)
        {
            window.draw(o2);
        }
        if (o33 == true)
        {
            window.draw(o3);
        }
        if (o44 == true)
        {
            window.draw(o4);
        }
        if (o55 == true)
        {
            window.draw(o5);
        }
        if (o66 == true)
        {
            window.draw(o6);
        }
        if (o77 == true)
        {
            window.draw(o7);
        }
        if (o88 == true)
        {
            window.draw(o8);
        }
        if (o99 == true)
        {
            window.draw(o9);
        }
        if (o1010 == true)
        {
            window.draw(o10);
        }
        if (o1111 == true)
        {
            window.draw(o11);
        }
        if (o1212 == true)
        {
            window.draw(o12);
        }
        if (o1313 == true)
        {
            window.draw(o13);
        }
        if (o1414 == true)
        {
            window.draw(o14);
        }
        if (o1515 == true)
        {
            window.draw(o15);
        }
        if (o1616 == true)
        {
            window.draw(o16);
        }
        if (yexwon == true)
        {
            window.draw(gameover1);
        }
        if (wowon == true)
        {
            window.draw(gameover0);
        }
        if (dhraa == true)
        {
            window.draw(dhr);
        }
        if (yexu == true)
        {
            window.draw(xtext);
        }
        if (wo == true)
        {
            window.draw(otext);
        }
        if (invalmove == true)
        {
            window.draw(invalidmove);
            invalidmove.move(0, 1);
        }
        window.draw(backfrontt);
        if (leff == true)
        {
            window.draw(lef);
        }
        if (raii == true)
        {
            window.draw(rai);
        }
		//window.draw(gameover1);
		window.display();
	}

	return 0;
}
